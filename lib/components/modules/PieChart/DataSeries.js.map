{"version":3,"sources":["../../../../src/components/modules/PieChart/DataSeries.js"],"names":["d3","DataSeries","props","state","fill","render","pie","sort","arcData","values","sum","length","reduce","total","num","arcs","map","arc","idx","startAngle","endAngle","radius","innerRadius","labelTextFill","valueTextFill","valueTextFormatter","colors","colorAccessor","data","labels","width","showInnerLabels","showOuterLabels","sectorBorderColor","hoverAnimation","onMouseOver","onMouseLeave","yValue","seriesName","transform","defaultProps","scaleOrdinal","schemeCategory20","d"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;IAAYA,E;;;;;;;;;;;;IAGNC,U;;;AACL,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA,+CAClB,sBAAMA,KAAN,CADkB;;AAElB,QAAKC,KAAL,GAAa;AACZC,SAAM,MAAKF,KAAL,CAAWE;AADL,GAAb;AAFkB;AAKlB;;sBAQDC,M,qBAAS;AACR,MAAIH,QAAQ,KAAKA,KAAjB;;AAEA,MAAII,MAAMN,GAAGM,GAAH,GAASC,IAAT,CAAc,IAAd,CAAV;;AAEA,MAAIC,UAAUF,IAAIJ,MAAMO,MAAV,CAAd;AACA,MAAIC,MAAMR,MAAMO,MAAN,CAAaE,MAAb,GAAoB,CAApB,IAAuBT,MAAMO,MAAN,CAAaG,MAAb,CAAoB,UAACC,KAAD,EAAOC,GAAP;AAAA,UAAcD,QAAMC,GAApB;AAAA,GAApB,CAAjC;AACA,MAAIC,OAAOP,QAAQQ,GAAR,CAAY,UAACC,GAAD,EAAMC,GAAN,EAAc;AACpC,UACC;AACC,SAAKA,GADN;AAEC,gBAAYD,IAAIE,UAFjB;AAGC,cAAUF,IAAIG,QAHf;AAIC,iBAAalB,MAAMmB,MAJpB;AAKC,iBAAanB,MAAMoB,WALpB;AAMC,mBAAepB,MAAMqB,aANtB;AAOC,mBAAerB,MAAMsB,aAPtB;AAQC,wBAAoBtB,MAAMuB,kBAR3B;AASC,UAAMvB,MAAMwB,MAAN,CAAaxB,MAAMyB,aAAN,CAAoBzB,MAAM0B,IAAN,CAAWV,GAAX,CAApB,EAAqCA,GAArC,CAAb,CATP;AAUC,WAAOhB,MAAMO,MAAN,CAAaS,GAAb,CAVR;AAWC,WAAOhB,MAAM2B,MAAN,CAAaX,GAAb,CAXR;AAYC,SAAKR,GAZN;AAaC,WAAOR,MAAM4B,KAbd;AAcC,qBAAiB5B,MAAM6B,eAdxB;AAeC,qBAAiB7B,MAAM8B,eAfxB;AAgBC,uBAAmB9B,MAAM+B,iBAhB1B;AAiBC,oBAAgB/B,MAAMgC,cAjBvB;AAkBC,iBAAahC,MAAMiC,WAlBpB;AAmBC,kBAAcjC,MAAMkC,YAnBrB;AAoBC,eAAW,EAAEC,QAAQnC,MAAMO,MAAN,CAAaS,GAAb,CAAV,EAA6BoB,YAAYpC,MAAM2B,MAAN,CAAaX,GAAb,CAAzC;AApBZ,KADD;AAwBA,GAzBU,CAAX;AA0BA,SACC;AAAA;AAAA,KAAG,WAAU,kBAAb,EAAgC,WAAWhB,MAAMqC,SAAjD;AACExB;AADF,GADD;AAKA,E;;;6BA7CMyB,Y,GAAe;AACrBZ,OAAM,EADe;AAErBN,cAAa,CAFQ;AAGrBI,SAAQ1B,GAAGyC,YAAH,CAAgBzC,GAAG0C,gBAAnB,CAHa;AAIrBf,gBAAe,uBAACgB,CAAD,EAAIzB,GAAJ;AAAA,SAAYA,GAAZ;AAAA;AAJM,C;kBAiDRjB,U","file":"DataSeries.js","sourcesContent":["import { h, Component } from 'preact'\nimport ArcContainer from './ArcContainer'\nimport * as d3 from 'd3'\n\n\nclass DataSeries extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tfill: this.props.fill\n\t\t}\n\t}\n\tstatic defaultProps = {\n\t\tdata: [],\n\t\tinnerRadius: 0,\n\t\tcolors: d3.scaleOrdinal(d3.schemeCategory20),\n\t\tcolorAccessor: (d, idx) => idx\n\t}\n\n\trender() {\n\t\tlet props = this.props\n\n\t\tlet pie = d3.pie().sort(null)\n\n\t\tlet arcData = pie(props.values)\n\t\tlet sum = props.values.length>0&&props.values.reduce((total,num)=> total+num)\n\t\tlet arcs = arcData.map((arc, idx) => {\n\t\t\treturn (\n\t\t\t\t<ArcContainer\n\t\t\t\t\tkey={idx}\n\t\t\t\t\tstartAngle={arc.startAngle}\n\t\t\t\t\tendAngle={arc.endAngle}\n\t\t\t\t\touterRadius={props.radius}\n\t\t\t\t\tinnerRadius={props.innerRadius}\n\t\t\t\t\tlabelTextFill={props.labelTextFill}\n\t\t\t\t\tvalueTextFill={props.valueTextFill}\n\t\t\t\t\tvalueTextFormatter={props.valueTextFormatter}\n\t\t\t\t\tfill={props.colors(props.colorAccessor(props.data[idx], idx))}\n\t\t\t\t\tvalue={props.values[idx]}\n\t\t\t\t\tlabel={props.labels[idx]}\n\t\t\t\t\tsum={sum}\n\t\t\t\t\twidth={props.width}\n\t\t\t\t\tshowInnerLabels={props.showInnerLabels}\n\t\t\t\t\tshowOuterLabels={props.showOuterLabels}\n\t\t\t\t\tsectorBorderColor={props.sectorBorderColor}\n\t\t\t\t\thoverAnimation={props.hoverAnimation}\n\t\t\t\t\tonMouseOver={props.onMouseOver}\n\t\t\t\t\tonMouseLeave={props.onMouseLeave}\n\t\t\t\t\tdataPoint={{ yValue: props.values[idx], seriesName: props.labels[idx] }}\n\t\t\t\t/>\n\t\t\t)\n\t\t})\n\t\treturn (\n\t\t\t<g className='rd3-piechart-pie' transform={props.transform} >\n\t\t\t\t{arcs}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\n\nexport default DataSeries\n"]}