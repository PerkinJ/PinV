{"version":3,"sources":["../../../../src/components/modules/ScatterPlot/ScatterPlot.js"],"names":["d3","xMax","data","key","max","d","yMax","xScale","props","padding","XAxis","width","scaleLinear","domain","range","left","yScale","YAxis","height","top","bottom","ScatterPlot","renderData","dWidth","right","length","dHeight","xDomain","yDomain","scaleX","scaleY","scatterPlot","select","rect","selectAll","_this","on","mouseX","mouse","x0","invert","Number","Math","round","bisect","bisector","index","x1","y1","setState","content","tooltipStyle","event","pageX","clientY","opacity","vLineStyle","style","display","hLineStyle","focusX","focusY","x2","y2","state","componentDidMount","componentDidUpdate","render","scales","interactive","tickSize","tickFormat","stroke","tipLineProps","rectProps","transform","container","el","axis","overlay","defaultProps","r","color","fill"],"mappings":"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","file":"ScatterPlot.js","sourcesContent":["import { h, Component } from 'preact'\nimport * as d3 from 'd3'\nimport Circles from '../../basic/Circles'\nimport Tooltip from '../../basic/Tooltip'\nimport Axis from '../../basic/Axis'\nimport styles from './index.less'\n// 从数据集中返回最大的 X 坐标\nconst xMax = (data, key) => d3.max(data, (d) => d[key])\n\n// 从数据集返回最大的 Y 坐标\nconst yMax = (data, key) => d3.max(data, (d) => d[key])\n\n// 返回将数据缩放X坐标以适合图表的函数\nconst xScale = (props) => {\n\tlet { padding, data, XAxis, width } = props\n\treturn d3.scaleLinear()\n\t\t.domain([0, xMax(data, XAxis)])\n\t\t.range([padding.left -1, width - padding.left -1])   // 这里主要解决坐标轴的偏差\n}\n// const quantize = d3.scale.quantize().domain([500,0]).range(['#888','#666','#444','#333','#000'])\n// 返回将数据缩放Y坐标以适合图表的函数\nconst yScale = (props) => {\n\tlet { data, YAxis, height, padding } = props\n\treturn d3.scaleLinear()\n\t\t.domain([0, yMax(data, YAxis)])\n\t\t.range([height - padding.top - padding.bottom, padding.top])\n}\nclass ScatterPlot extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\t// circleStyle: {\n\t\t\t// \tstyle: { display: 'none' }\n\t\t\t// },\n\t\t\tvLineStyle: {\n\t\t\t\tstyle: { display: 'none' }\n\t\t\t},\n\t\t\thLineStyle: {\n\t\t\t\tstyle: { display: 'none' }\n\t\t\t}\n\t\t}\n\t}\n\tstatic defaultProps = {\n\t\twidth: 600,\n\t\theight: 400,\n\t\tpadding: { top: 32, bottom: 32, left: 20, right: 20 },\n\t\t// left: 40,\n\t\ttickSize: 5,\n\t\ttickFormat: '',\n\t\tstroke: '#673ab7',\n\t\tr: 3,\n\t\tcolor: 'red',\n\t\tfill: '#000',\n\t\tinteractive: true, // 是否显示交互的效果\n\t\t// circleProps: {    //circle的style属性\n\t\t// \tr: 5,\n\t\t// \tfill: 'transparent',\n\t\t// \tstroke:'#666'\n\t\t// },\n\t\ttipLineProps: {   //两条虚线的公共样式\n\t\t\tstroke: '#666'\n\t\t}\n\t}\n\trenderData = () => {\n\t\tlet { width, height, padding, data, XAxis, YAxis } = this.props\n\t\tlet dWidth = width - padding.left - padding.right - data.length / 2,  // 这里要减去每个circle的半径\n\t\t\tdHeight = height - padding.top - padding.bottom\n\n\t\tlet xDomain = d3.max(data, (d) => d[XAxis]),\n\t\t\tyDomain = d3.max(data, (d) => d[YAxis])\n\t\tlet scaleX = d3.scaleLinear()\n\t\t\t.domain([0, xDomain])\n\t\t\t.range([0, dWidth])\n\t\tlet scaleY = d3.scaleLinear()\n\t\t\t.domain([0, yDomain])\n\t\t\t.range([dHeight, padding.bottom])\n\t\tlet scatterPlot = d3.select(this.scatterPlot)\n\t\tlet rect = scatterPlot.selectAll('rect')\n\n\t\tlet _this = this\n\t\trect.on('mouseover', function () {\n\t\t\tlet mouseX = d3.mouse(this)[0] - padding.left\n\t\t\t// 通过比例尺的反函数计算原数据中的值\n\t\t\tlet x0 = scaleX.invert(mouseX)\n\t\t\t// x0取值应该在[0,xDomain]之间\n\t\t\tx0 = x0 < 0 ? 0 : x0 >= xDomain ? xDomain : Number(Math.round(x0))\n\t\t\t// 查找元素组中x0的值，并返回索引\n\t\t\tlet bisect = d3.bisector((d) => d[XAxis]).left\n\t\t\tlet index = bisect(data, x0)\n\n\t\t\tlet x1 = data[index][XAxis], y1 = data[index][YAxis]\n\t\t\t_this.setState({\n\t\t\t\tcontent: `${XAxis}  ${x1} : ${YAxis}  ${y1}`,\n\t\t\t\ttooltipStyle: {\n\t\t\t\t\tleft: d3.event.pageX,\n\t\t\t\t\ttop: d3.event.clientY + 20,\n\t\t\t\t\topacity: 0.9\n\t\t\t\t},\n\t\t\t\t// circleStyle: {\n\t\t\t\t// \tstyle: { display: 'none' }\n\t\t\t\t// },\n\t\t\t\tvLineStyle: {\n\t\t\t\t\tstyle: { display: 'none' }\n\t\t\t\t},\n\t\t\t\thLineStyle: {\n\t\t\t\t\tstyle: { display: 'none' }\n\t\t\t\t}\n\t\t\t})\n\t\t}).on('mouseout', () => {\n\t\t\tthis.setState({\n\t\t\t\ttooltipStyle: {\n\t\t\t\t\topacity: 0\n\t\t\t\t},\n\t\t\t\t// circleStyle: {\n\t\t\t\t// \tstyle: { display: 'none' }\n\t\t\t\t// },\n\t\t\t\tvLineStyle: {\n\t\t\t\t\tstyle: { display: 'none' }\n\t\t\t\t},\n\t\t\t\thLineStyle: {\n\t\t\t\t\tstyle: { display: 'none' }\n\t\t\t\t}\n\t\t\t})\n\t\t}).on('mousemove', function () {\n\t\t\tlet mouseX = d3.mouse(this)[0] - padding.left\n\t\t\t// 通过比例尺的反函数计算原数据中的值\n\t\t\tlet x0 = scaleX.invert(mouseX)\n\t\t\t// x0取值应该在[0,xDomain]之间\n\t\t\tx0 = x0 < 0 ? 0 : x0 >= xDomain ? xDomain : Number(Math.round(x0))\n\t\t\t// 查找元素组中x0的值，并返回索引\n\t\t\tlet bisect = d3.bisector((d) => d[XAxis]).left\n\t\t\tlet index = bisect(data, x0)\n\n\t\t\tlet x1 = data[index][XAxis], y1 = data[index][YAxis]\n\t\t\tlet focusX = scaleX(x1) + padding.left + 11, focusY = scaleY(y1) + padding.top\n\n\t\t\t_this.setState({\n\t\t\t\tcontent: `${XAxis}  ${x1} : ${YAxis}  ${y1}`,\n\t\t\t\ttooltipStyle: {\n\t\t\t\t\tleft: d3.event.pageX,\n\t\t\t\t\ttop: d3.event.clientY + 20,\n\t\t\t\t\topacity: 0.9\n\t\t\t\t},\n\t\t\t\t// circleStyle: {\n\t\t\t\t// \tstyle: { display: 'block' },\n\t\t\t\t// \ttransform: `translate(${focusX},${focusY})`\n\t\t\t\t// },\n\t\t\t\tvLineStyle: {\n\t\t\t\t\tstyle: { display: 'block' },\n\t\t\t\t\tx1: focusX,\n\t\t\t\t\ty1: padding.top,\n\t\t\t\t\tx2: focusX,\n\t\t\t\t\ty2: height - padding.bottom\n\t\t\t\t},\n\t\t\t\thLineStyle: {\n\t\t\t\t\tx1: width,\n\t\t\t\t\ty1: focusY,\n\t\t\t\t\tx2: padding.left,\n\t\t\t\t\ty2: focusY\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\tcomponentDidMount() {\n\t\tthis.renderData()\n\t}\n\tcomponentDidUpdate() {\n\t\tthis.renderData()\n\t}\n\trender(props, { content, tooltipStyle, vLineStyle, hLineStyle }) {\n\t\tconst scales = { xScale: xScale(props), yScale: yScale(props) }\n\t\tlet { interactive, width, height, padding, data, XAxis, YAxis, tickSize = 5, tickFormat, stroke, tipLineProps } = props\n\t\tlet dWidth = width - padding.left - padding.right - data.length / 2,  // 这里要减去每个circle的半径\n\t\t\tdHeight = height - padding.top - padding.bottom\n\n\t\tconst rectProps = {\n\t\t\twidth:width - padding.left,\n\t\t\theight: height - padding.top - padding.bottom,\n\t\t\ttransform: `translate(${padding.left},${padding.top})`\n\t\t}\n\t\treturn <div class={styles.container}>\n\t\t\t<Tooltip\n\t\t\t\tcontent={content}\n\t\t\t\ttooltipStyle={tooltipStyle}\n\t\t\t/>\n\t\t\t<svg ref={el => this.scatterPlot = el} width={width + padding.left + padding.right} height={height + padding.top + padding.bottom}>\n\t\t\t\t<Axis\n\t\t\t\t\thidden={false}\n\t\t\t\t\ttype=\"x\"\n\t\t\t\t\tdataKey={XAxis}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tlength={dWidth}\n\t\t\t\t\torient=\"bottom\"\n\t\t\t\t\tstroke={stroke}\n\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\tclass={styles.axis}\n\t\t\t\t\ttransform={`translate(${padding.left},${height - padding.top} )`} />\n\t\t\t\t<Axis\n\t\t\t\t\thidden={false}\n\t\t\t\t\ttype=\"y\"\n\t\t\t\t\tdataKey={YAxis}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tlength={dHeight}\n\t\t\t\t\torient=\"left\"\n\t\t\t\t\ttickSize={tickSize}\n\t\t\t\t\ttickFormat={tickFormat}\n\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\tstroke={stroke}\n\t\t\t\t\tclass={styles.axis}\n\t\t\t\t\ttransform={`translate(${padding.left},${padding.top})`} />\n\t\t\t\t<Circles {...props} {...scales} />\n\t\t\t\t{interactive&&<rect class={styles.overlay} {...rectProps} />}\n\t\t\t\t{/*<g class=\"focusCircle\" {...circleStyle}>\n\t\t\t\t\t<circle {...circleProps} />\n\t\t\t\t</g>*/}\n\t\t\t\t<g class=\"focusLine\" >\n\t\t\t\t\t<line stroke-dasharray=\"3\" {...tipLineProps} {...vLineStyle} />\n\t\t\t\t\t<line stroke-dasharray=\"3\" {...tipLineProps} {...hLineStyle} />\n\t\t\t\t</g>\n\t\t\t</svg>\n\t\t</div>\n\t}\n}\nexport default ScatterPlot\n"]}