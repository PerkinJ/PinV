{"version":3,"sources":["../../../../src/components/modules/LineChart/LineChart.js"],"names":["d3","LineChart","props","renderData","width","height","padding","data","XAxis","YAxis","dWidth","left","right","length","dHeight","top","bottom","xDomain","max","d","yDomain","scaleX","scaleLinear","domain","range","scaleY","lineChart","select","rect","selectAll","_this","on","mouseX","mouse","x0","invert","Number","Math","round","bisect","bisector","index","x1","y1","setState","content","tooltipStyle","event","pageX","clientY","opacity","circleStyle","style","display","vLineStyle","hLineStyle","focusX","focusY","transform","x2","y2","state","componentDidMount","componentDidUpdate","render","interactive","tickSize","tickFormat","stroke","shape","circleProps","tipLineProps","circleStroke","linePath","line","x","y","curve","lineProps","fill","rectProps","container","el","axis","r","overlay","defaultProps","color"],"mappings":"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","file":"LineChart.js","sourcesContent":["import { h, Component } from 'preact'\nimport * as d3 from 'd3'\nimport Axis from '../../basic/Axis'\nimport styles from './index.less'\nimport Circles from '../../basic/Circles'\nimport Tooltip from '../../basic/Tooltip'\nclass LineChart extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tcircleStyle:{\n\t\t\t\tstyle:{display:'none'}\n\t\t\t},\n\t\t\tvLineStyle:{\n\t\t\t\tstyle:{display:'none'}\n\t\t\t},\n\t\t\thLineStyle:{\n\t\t\t\tstyle:{display:'none'}\n\t\t\t}\n\t\t}\n\t}\n\tstatic defaultProps = {\n\t\twidth: 600,\n\t\theight: 400,\n\t\tpadding: { top: 32, bottom: 32, left: 20, right: 20 },\n\t\t// left: 40,\n\t\ttickSize: 5,\n\t\ttickFormat: '',\n\t\tstroke: '#673ab7',\n\t\tshape: 'curveCardinal',\n\t\tr: 3,\n\t\tinteractive:true, // 是否显示交互的效果\n\t\tcolor: 'rgb(255,0,0)',\n\t\tcircleProps:{    //circle的style属性\n\t\t\tr:5,\n\t\t\tfill:'#666'\n\t\t},\n\t\ttipLineProps:{   //两条虚线的公共样式\n\t\t\tstroke:'#666'\n\t\t},\n\t\tcircleStroke:null\n\t}\n\tcomponentDidMount() {\n\t\tthis.renderData()\n\t}\n\tcomponentDidUpdate(){\n\t\tthis.renderData()\n\t}\n\t// 主要处理不同数据下，focusLine以及focusCircle的位置以及样式\n\trenderData = ()=>{\n\t\tlet { width, height, padding, data, XAxis, YAxis } = this.props\n\t\tlet dWidth = width - padding.left - padding.right - data.length / 2,  // 这里要减去每个circle的半径\n\t\t\tdHeight = height - padding.top - padding.bottom\n\n\t\tlet xDomain = d3.max(data, (d) => d[XAxis]),\n\t\t\tyDomain = d3.max(data, (d) => d[YAxis])\n\t\tlet scaleX = d3.scaleLinear()\n\t\t\t.domain([0, xDomain])\n\t\t\t.range([0, dWidth])\n\t\tlet scaleY = d3.scaleLinear()\n\t\t\t.domain([0, yDomain])\n\t\t\t.range([dHeight, padding.bottom])\n\t\tlet lineChart = d3.select(this.lineChart)\n\t\tlet rect = lineChart.selectAll('rect')\n\n\t\tlet _this = this\n\n\t\trect.on('mouseover', function () {\n\t\t\tlet mouseX = d3.mouse(this)[0] - padding.left\n\t\t\t// 通过比例尺的反函数计算原数据中的值\n\t\t\tlet x0 = scaleX.invert(mouseX)\n\t\t\t// x0取值应该在[0,xDomain]之间\n\t\t\tx0 = x0 < 0 ? 0 : x0 >= xDomain ? xDomain : Number(Math.round(x0))\n\t\t\t// 查找元素组中x0的值，并返回索引\n\t\t\tlet bisect = d3.bisector((d) => d[XAxis]).left\n\t\t\tlet index = bisect(data, x0)\n\n\t\t\tlet x1 = data[index][XAxis], y1 = data[index][YAxis]\n\t\t\t_this.setState({\n\t\t\t\tcontent: `${XAxis}  ${x1} : ${YAxis}  ${y1}`,\n\t\t\t\ttooltipStyle: {\n\t\t\t\t\tleft: d3.event.pageX,\n\t\t\t\t\ttop: d3.event.clientY + 20,\n\t\t\t\t\topacity: 0.9\n\t\t\t\t},\n\t\t\t\tcircleStyle:{\n\t\t\t\t\tstyle:{display:'none'}\n\t\t\t\t},\n\t\t\t\tvLineStyle:{\n\t\t\t\t\tstyle:{display:'none'}\n\t\t\t\t},\n\t\t\t\thLineStyle:{\n\t\t\t\t\tstyle:{display:'none'}\n\t\t\t\t}\n\t\t\t})\n\t\t}).on('mouseout', () => {\n\t\t\tthis.setState({\n\t\t\t\ttooltipStyle: {\n\t\t\t\t\topacity: 0\n\t\t\t\t},\n\t\t\t\tcircleStyle:{\n\t\t\t\t\tstyle:{display:'none'}\n\t\t\t\t},\n\t\t\t\tvLineStyle:{\n\t\t\t\t\tstyle:{display:'none'}\n\t\t\t\t},\n\t\t\t\thLineStyle:{\n\t\t\t\t\tstyle:{display:'none'}\n\t\t\t\t}\n\t\t\t})\n\t\t}).on('mousemove', function () {\n\t\t\tlet mouseX = d3.mouse(this)[0] - padding.left\n\n\t\t\t// 通过比例尺的反函数计算原数据中的值\n\t\t\tlet x0 = scaleX.invert(mouseX)\n\t\t\t// x0取值应该在[0,xDomain]之间\n\t\t\tx0 = x0 < 0 ? 0 : x0 >= xDomain ? xDomain : Number(Math.round(x0))\n\t\t\t// 查找元素组中x0的值，并返回索引\n\t\t\tlet bisect = d3.bisector((d) => d[XAxis]).left\n\t\t\tlet index = bisect(data, x0)\n\n\t\t\tlet x1 = data[index][XAxis], y1 = data[index][YAxis]\n\t\t\tlet focusX = scaleX(x1) + padding.left + 11, focusY = scaleY(y1) + padding.top\n\n\t\t\t_this.setState({\n\t\t\t\tcontent: `${XAxis}  ${x1} : ${YAxis}  ${y1}`,\n\t\t\t\ttooltipStyle: {\n\t\t\t\t\tleft: d3.event.pageX,\n\t\t\t\t\ttop: d3.event.clientY + 20,\n\t\t\t\t\topacity: 0.9\n\t\t\t\t},\n\t\t\t\tcircleStyle:{\n\t\t\t\t\tstyle:{display:'block'},\n\t\t\t\t\ttransform:`translate(${focusX},${focusY})`\n\t\t\t\t},\n\t\t\t\tvLineStyle:{\n\t\t\t\t\tstyle:{display:'block'},\n\t\t\t\t\tx1:focusX,\n\t\t\t\t\ty1:focusY,\n\t\t\t\t\tx2:focusX,\n\t\t\t\t\ty2:height - padding.bottom\n\t\t\t\t},\n\t\t\t\thLineStyle:{\n\t\t\t\t\tx1:focusX,\n\t\t\t\t\ty1:focusY,\n\t\t\t\t\tx2:padding.left,\n\t\t\t\t\ty2:focusY\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\trender(props, { content, tooltipStyle,circleStyle,vLineStyle,hLineStyle }) {\n\t\tlet { interactive,width, height, padding, data, XAxis, YAxis, tickSize = 5, tickFormat, stroke, shape,circleProps,tipLineProps,circleStroke } = props\n\t\tlet dWidth = width - padding.left - padding.right - data.length / 2,  // 这里要减去每个circle的半径\n\t\t\tdHeight = height - padding.top - padding.bottom\n\n\t\tlet xDomain = d3.max(data, (d) => d[XAxis]),\n\t\t\tyDomain = d3.max(data, (d) => d[YAxis])\n\t\tlet scaleX = d3.scaleLinear()\n\t\t\t.domain([0, xDomain])\n\t\t\t.range([0, dWidth])\n\t\tlet scaleY = d3.scaleLinear()\n\t\t\t.domain([0, yDomain])\n\t\t\t.range([dHeight, padding.bottom])\n\t\tlet linePath = d3.line()\n\t\t\t.x((d) => scaleX(d[XAxis]))\n\t\t\t.y((d) => scaleY(d[YAxis]))\n\t\t\t.curve(d3[shape])\n\t\tconst lineProps = {\n\t\t\tstroke,\n\t\t\tfill: 'none',\n\t\t\td: linePath(data),\n\t\t\ttransform: `translate(${padding.left + 10},${padding.top})`\n\t\t}\n\t\tconst rectProps = {\n\t\t\twidth:width - padding.left,\n\t\t\theight: height - padding.top - padding.bottom,\n\t\t\ttransform: `translate(${padding.left},${padding.top})`\n\t\t}\n\t\t// v4与v3的区别 v3的interpolate不再使用  https://github.com/d3/d3-shape/blob/master/README.md#curves\n\t\treturn <div class={styles.container}>\n\t\t\t<Tooltip\n\t\t\t\tcontent={content}\n\t\t\t\ttooltipStyle={tooltipStyle}\n\t\t\t/>\n\t\t\t<svg ref={el => this.lineChart = el} width={width + padding.left + padding.right} height={height + padding.top + padding.bottom}>\n\t\t\t\t<Axis\n\t\t\t\t\thidden={false}\n\t\t\t\t\ttype=\"x\"\n\t\t\t\t\tdataKey=\"key\"\n\t\t\t\t\tdata={data}\n\t\t\t\t\tlength={dWidth}\n\t\t\t\t\torient=\"bottom\"\n\t\t\t\t\tstroke={stroke}\n\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\tclass={styles.axis}\n\t\t\t\t\ttransform={`translate(${padding.left},${height - padding.top} )`} />\n\t\t\t\t<Axis\n\t\t\t\t\thidden={false}\n\t\t\t\t\ttype=\"y\"\n\t\t\t\t\tdataKey=\"value\"\n\t\t\t\t\tdata={data}\n\t\t\t\t\tlength={dHeight}\n\t\t\t\t\torient=\"left\"\n\t\t\t\t\ttickSize={tickSize}\n\t\t\t\t\ttickFormat={tickFormat}\n\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\tstroke={stroke}\n\t\t\t\t\tclass={styles.axis}\n\t\t\t\t\ttransform={`translate(${padding.left},${padding.top})`} />\n\t\t\t\t<path class={styles.line} {...lineProps} />\n\t\t\t\t<g transform={`translate(${padding.left - props.r},0)`} >\n\t\t\t\t\t<Circles\n\t\t\t\t\t\txScale={scaleX}\n\t\t\t\t\t\tyScale={scaleY}\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t\tfill='#fff'\n\t\t\t\t\t\tcircleStroke={circleStroke}\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t\t{interactive&&<rect class={styles.overlay} {...rectProps} />}\n\t\t\t\t<g class=\"focusCircle\" {...circleStyle}>\n\t\t\t\t\t<circle {...circleProps}/>\n\t\t\t\t</g>\n\t\t\t\t<g class=\"focusLine\" >\n\t\t\t\t\t<line stroke-dasharray=\"3\" {...tipLineProps} {...vLineStyle}/>\n\t\t\t\t\t<line stroke-dasharray=\"3\" {...tipLineProps} {...hLineStyle}/>\n\t\t\t\t</g>\n\t\t\t</svg>\n\t\t</div>\n\t}\n}\nexport default LineChart\n"]}