{"version":3,"sources":["../../../../src/components/basic/HierarchyLayout/HierarchyLayout.js"],"names":["d3","HierarchyLayout","props","handleMouseOver","e","d","index","dataKey","nameKey","isHasVal","Object","keys","data","indexOf","name","valueStr","setState","activeIdx","content","tooltipStyle","left","screenX","top","screenY","opacity","handleMouseOut","computeTextRotation","angle","x0","x1","Math","PI","state","descendantsData","linkData","render","width","height","padding","interactive","type","backgroundColor","hoverColor","root","hierarchy","treeLayout","tree","cluster","size","right","bottom","descendants","links","container","el","graph","map","source","x","y","target","nodes","node","solid","label","rectPadding","paddingOuter","paddingInner","paddingLeft","paddingRight","paddingTop","paddingBottom","tile","ratio","layout","treemap","partition","treemapBinary","treemapDice","treemapSlice","treemapResquarify","treemapSquarify","partitionPadding","sum","value","y0","y1","packLayout","pack","packPadding","packData","r","children","undefined","radius","sunburstLayout","arc","startAngle","endAngle","innerRadius","outerRadius","sunburstData","centroid","parent","defaultProps"],"mappings":"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","file":"HierarchyLayout.js","sourcesContent":["import { h, Component } from 'preact'\nimport * as d3 from 'd3'\nimport styles from './index.less'\nimport Tooltip from '../Tooltip'\n\nclass HierarchyLayout extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tdescendantsData: [],\n\t\t\tlinkData: []\n\t\t}\n\t}\n\tstatic defaultProps = {\n\t\twidth: 400,\n\t\theight: 300,\n\t\tpadding: { left: 0, right: 0, top: 0, bottom: 0 },\n\t\tdataKey: '',\n\t\tnameKey: '',\n\t\ttype: 'tree',\n\t\ttile: 'treemapSquarify', //表示生成矩形树的tiling method 算法\n\t\tratio: 2, \t// 当tile为 treemapSquarify,才有效，表示生成矩形的理论长宽比\n\t\tpaddingOuter: 20,\n\t\tpaddingInner: 0,\n\t\trectPadding: 0,\n\t\tpaddingLeft: 0,\n\t\tpaddingRight: 0,\n\t\tpaddingTop: 0,\n\t\tpaddingBottom: 0,\n\t\tpartitionPadding:0,   //partition's padding\n\t\tpackPadding:10,      // pack's padding\n\t\tradius:140,\t\t\t// SunburstLayout 的半径\n\t\tangle:1,\t\t\t// SunburstLayout 的angle范围[0-1]\n\t\tbackgroundColor:'#CDDC39',\t// 默认背景颜色\n\t\thoverColor:'rgba(139,195,74,0.8)'\t\t// 悬浮颜色\n\n\t}\n\thandleMouseOver = (e, d, index) => {\n\t\tconst { dataKey, nameKey } = this.props\n\t\tlet isHasVal = Object.keys(d.data).indexOf(dataKey)\n\t\tlet name = d.data[nameKey]\n\t\tlet valueStr = isHasVal > -1 ? `,${dataKey}:${d.data[dataKey]}` : ''\n\t\tthis.setState({\n\t\t\tactiveIdx: index,\n\t\t\tcontent: `${nameKey}: ${name}${valueStr}`,\n\t\t\ttooltipStyle: { left: e.screenX + 20, top: e.screenY - 120, opacity: 0.9 }\n\t\t})\n\t}\n\thandleMouseOut = () => {\n\t\tthis.setState({\n\t\t\tactiveIdx: '0',\n\t\t\tcontent: '',\n\t\t\ttooltipStyle: { opacity: 0 }\n\t\t})\n\t}\n\tcomputeTextRotation = (d) => {\n\t\tlet angle = (d.x0 + d.x1) / Math.PI * 90\n\t\treturn (angle < 180) ? angle - 90 : angle + 90\n\t}\n\trender({ width, height, padding, data, interactive, type,backgroundColor,hoverColor }, { tooltipStyle, content, activeIdx }) {\n\t\tlet root = d3.hierarchy(data)\n\t\tswitch (type) {\n\t\t\tcase 'tree':\n\t\t\tcase 'cluster': {\n\t\t\t\tlet treeLayout = type === 'tree' ? d3.tree() : d3.cluster()\n\t\t\t\ttreeLayout.size([width - padding.left - padding.right, height - padding.top - padding.bottom - 60])\n\t\t\t\ttreeLayout(root)\n\t\t\t\tlet descendantsData = root.descendants(), linkData = root.links()\n\t\t\t\treturn (\n\t\t\t\t\t<div class={styles.container}>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t\t\ttooltipStyle={tooltipStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\ttransform={`translate(${padding.left},${padding.top})`}\n\t\t\t\t\t\t\tref={el => this.tree = el}\n\t\t\t\t\t\t\tviewBox=\"0 0 400 240\"\n\t\t\t\t\t\t\tclass={styles.graph}\n\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\theight={height}>\n\t\t\t\t\t\t\t<g >\n\t\t\t\t\t\t\t\t<g class={styles.links}>\n\t\t\t\t\t\t\t\t\t{linkData && linkData.map((d, index) =>\n\t\t\t\t\t\t\t\t\t\t<g key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<line x1={d.source.x} y1={d.source.y} x2={d.target.x} y2={d.target.y} stroke=\"#5f5f5f\" />\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t<g class={styles.nodes}>\n\t\t\t\t\t\t\t\t\t{descendantsData && descendantsData.map((d, index) =>\n\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={interactive ? this.handleMouseOut : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseMove={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tclass={styles.node}>\n\t\t\t\t\t\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\t\t\t\t\t\tclass={styles.solid}\n\t\t\t\t\t\t\t\t\t\t\t\tcx={d.x}\n\t\t\t\t\t\t\t\t\t\t\t\tcy={d.y}\n\t\t\t\t\t\t\t\t\t\t\t\tr={activeIdx === index ? \"18\" : \"14\"}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index + 1}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? hoverColor : backgroundColor} />\n\t\t\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"#fff\" : \"#000\"}\n\t\t\t\t\t\t\t\t\t\t\t\tclass={styles.label}\n\t\t\t\t\t\t\t\t\t\t\t\tdx={d.x - 9}\n\t\t\t\t\t\t\t\t\t\t\t\tdy={d.y + 5}>\n\t\t\t\t\t\t\t\t\t\t\t\t{d.data.name}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'treemap':\n\t\t\tcase 'partition': {\n\t\t\t\tconst { rectPadding, paddingOuter, paddingInner, paddingLeft, paddingRight, paddingTop, paddingBottom, tile, ratio } = this.props\n\t\t\t\tlet layout = type === 'treemap' ? d3.treemap() : d3.partition()\n\t\t\t\tlayout.size([width, height])\n\t\t\t\tif (type === 'treemap'){\n\t\t\t\t\tpaddingOuter ? layout.paddingOuter(paddingOuter) : ''\n\t\t\t\t\tpaddingInner ? layout.paddingInner(paddingInner) : ''\n\t\t\t\t\tpaddingLeft ? layout.paddingLeft(paddingLeft) : ''\n\t\t\t\t\tpaddingRight ? layout.paddingRight(paddingRight) : ''\n\t\t\t\t\tpaddingTop ? layout.paddingTop(paddingTop) : ''\n\t\t\t\t\tpaddingBottom ? layout.paddingBottom(paddingBottom) : ''\n\t\t\t\t\trectPadding ? layout.padding(rectPadding) : ''\n\t\t\t\t\t/* paddingTop, paddingRight, Left and Bottom available */\n\t\t\t\t\t// treemapDice,treemapSlice,treemapSquarify,treemapResquarify\n\t\t\t\t\tswitch (tile) {\n\t\t\t\t\t\tcase 'treemapBinary':\n\t\t\t\t\t\t\tlayout.tile(d3.treemapBinary)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase 'treemapDice':\n\t\t\t\t\t\t\tlayout.tile(d3.treemapDice)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase 'treemapSlice':\n\t\t\t\t\t\t\tlayout.tile(d3.treemapSlice)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase 'treemapResquarify':\n\t\t\t\t\t\t\tlayout.tile(d3.treemapResquarify)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tlayout.tile(d3.treemapSquarify.ratio(ratio))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (type === 'partition'){\n\t\t\t\t\tlayout.padding(this.props.partitionPadding)\n\t\t\t\t}\n\t\t\t\troot.sum(d => d.value)\n\t\t\t\tlayout(root)\n\t\t\t\tlet data = root.descendants()\n\t\t\t\treturn (\n\t\t\t\t\t<div class={styles.container}>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t\t\ttooltipStyle={tooltipStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<svg viewBox=\"0 0 405 310\" ref={el => this.treemap = el} width={width - padding.left - padding.right} height={height - padding.top - padding.bottom}>\n\t\t\t\t\t\t\t<g transform=\"translate(1,0)\">\n\t\t\t\t\t\t\t\t{data && data.map((d, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={interactive ? this.handleMouseOut : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseMove={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tkey={index + 1} class={styles.node} transform={`translate(${[d.x0, d.y0]})`}>\n\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\twidth={d.x1 - d.x0}\n\t\t\t\t\t\t\t\t\t\t\t\theight={d.y1 - d.y0}\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"#2f2f2f\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? hoverColor : backgroundColor} />\n\t\t\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\t\t\tdx=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\tdy=\"15\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"#fff\" : \"#000\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{d.data.name}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'pack': {\n\t\t\t\tlet packLayout = d3.pack()\n\t\t\t\tpackLayout.size([width - padding.left - padding.right, height - padding.bottom - padding.top - 20])\n\t\t\t\tpackLayout.padding(this.props.packPadding)\n\n\t\t\t\troot.sum(d => d.value)\n\t\t\t\tpackLayout(root)\n\t\t\t\tlet packData = root.descendants()\n\n\t\t\t\treturn (\n\t\t\t\t\t<div class={styles.container}>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t\t\ttooltipStyle={tooltipStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<svg ref={el => this.pack = el} width={width} height={height}>\n\t\t\t\t\t\t\t<g transform=\"translate(0,10)\">\n\t\t\t\t\t\t\t\t{packData && packData.map((d, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={interactive ? this.handleMouseOut : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseMove={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tkey={index + 1}\n\t\t\t\t\t\t\t\t\t\t\tclass={styles.node}\n\t\t\t\t\t\t\t\t\t\t\ttransform={`translate(${[d.x, d.y]})`}>\n\t\t\t\t\t\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\t\t\t\t\t\tr={d.r}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? hoverColor : backgroundColor}\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"#2f2f2f\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\t\t\tdy=\"4\"\n\t\t\t\t\t\t\t\t\t\t\t\tdx=\"-10\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"#fff\" : \"#000\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{d.children === undefined ? d.data.name : ''}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'sunburst': {\n\t\t\t\tconst {radius,angle} = this.props\n\t\t\t\tlet sunburstLayout = d3.partition()\n\t\t\t\tsunburstLayout.size([2 * Math.PI*angle, radius])\n\t\t\t\t// sunburstLayout.padding(2)\n\n\t\t\t\tlet arc = d3.arc()\n\t\t\t\t\t.startAngle(d => d.x0)\n\t\t\t\t\t.endAngle(d => d.x1)\n\t\t\t\t\t.innerRadius(d => d.y0)\n\t\t\t\t\t.outerRadius(d => d.y1)\n\n\t\t\t\troot.sum(d => d.value)\n\n\t\t\t\tsunburstLayout(root)\n\n\t\t\t\tlet sunburstData = root.descendants()\n\t\t\t\treturn (\n\t\t\t\t\t<div class={styles.container}>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t\t\ttooltipStyle={tooltipStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<svg ref={el => this.pack = el} width={width} height={height}>\n\t\t\t\t\t\t\t<g transform=\"translate(200,150)\">\n\t\t\t\t\t\t\t\t{sunburstData && sunburstData.map((d, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={interactive ? this.handleMouseOut : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseMove={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tkey={index + 1}\n\t\t\t\t\t\t\t\t\t\t\tclass={styles.node}>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td={arc(d)}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"rgba(0,105,92,0.8)\" : \"rgba(38,166,154,0.2)\"}\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"#2f2f2f\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\t\t\ttransform={`translate(${arc.centroid(d)}) rotate(${this.computeTextRotation(d)})`}\n\t\t\t\t\t\t\t\t\t\t\t\tdy=\".5em\"\n\t\t\t\t\t\t\t\t\t\t\t\tdx=\"-8\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"#fff\" : \"#000\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{d.parent ? d.data.name : ''}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default HierarchyLayout\n"]}