{"version":3,"sources":["../../../../src/components/basic/HierarchyLayout/HierarchyLayout.js"],"names":["d3","HierarchyLayout","props","handleClick","e","d","index","onClick","handleMouseOver","dataKey","nameKey","onMouseOver","isHasVal","Object","keys","data","indexOf","name","valueStr","setState","activeIdx","content","tooltip","x","screenX","y","screenY","child","show","sunburstHighlight","handleMouseOut","onMouseOut","computeTextRotation","angle","x0","x1","Math","PI","state","descendantsData","linkData","render","width","height","padding","interactive","type","backgroundColor","hoverColor","root","hierarchy","treeLayout","tree","cluster","size","left","right","top","bottom","descendants","links","container","el","graph","map","source","target","nodes","node","solid","label","rectPadding","paddingOuter","paddingInner","paddingLeft","paddingRight","paddingTop","paddingBottom","tile","ratio","layout","treemap","partition","treemapBinary","treemapDice","treemapSlice","treemapResquarify","treemapSquarify","partitionPadding","sum","value","y0","y1","packLayout","pack","packPadding","packData","r","children","undefined","radius","color","scaleOrdinal","schemeCategory20","min","sunburstLayout","arc","startAngle","endAngle","innerRadius","sqrt","outerRadius","sunburstData","contentArr","split","showText","length","display","depth","opacity","parent","centroid","defaultProps"],"mappings":"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","file":"HierarchyLayout.js","sourcesContent":["import { h, Component } from 'preact'\nimport * as d3 from 'd3'\nimport styles from './index.less'\nimport Tooltip from '../../common/Tooltip'\nclass HierarchyLayout extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tdescendantsData: [],\n\t\t\tlinkData: [],\n\t\t\tcontent:'',\n\t\t\ttooltip:{},\n\t\t\tsunburstHighlight:false  //sunburst高亮的标志,悬浮某节点时为true，其他节点变暗\n\t\t}\n\t}\n\tstatic defaultProps = {\n\t\twidth: 400,\n\t\theight: 300,\n\t\tpadding: { left: 0, right: 0, top: 0, bottom: 0 },\n\t\tdataKey: '',\n\t\tnameKey: '',\n\t\ttype: 'tree',\n\t\ttile: 'treemapSquarify', //表示生成矩形树的tiling method 算法\n\t\tratio: 2, \t// 当tile为 treemapSquarify,才有效，表示生成矩形的理论长宽比\n\t\tpaddingOuter: 20,\n\t\tpaddingInner: 0,\n\t\trectPadding: 0,\n\t\tpaddingLeft: 0,\n\t\tpaddingRight: 0,\n\t\tpaddingTop: 0,\n\t\tpaddingBottom: 0,\n\t\tpartitionPadding: 0,   //partition's padding\n\t\tpackPadding: 10,      // pack's padding\n\t\tangle: 1,\t\t\t// SunburstLayout 的angle范围[0-1]\n\t\tbackgroundColor: '#CDDC39',\t// 默认背景颜色\n\t\thoverColor: 'rgba(139,195,74,0.8)',\t\t// 悬浮颜色\n\t\tonClick:null\n\t}\n\thandleClick = (e, d, index)=>{\n\t\tconst {onClick} = this.props\n\t\tonClick && onClick(e, d, index)\n\t}\n\thandleMouseOver = (e, d, index) => {\n\t\tconst { dataKey, nameKey,onMouseOver } = this.props\n\t\tlet isHasVal = Object.keys(d.data).indexOf(dataKey)\n\t\tlet name = d.data[nameKey]\n\t\tlet valueStr = isHasVal > -1 ? `,${dataKey}:${d.data[dataKey]}` : ''\n\t\tthis.setState({\n\t\t\tactiveIdx: index,\n\t\t\tcontent:`${nameKey}: ${name}${valueStr}`,\n\t\t\ttooltip: {\n\t\t\t\tx: e.screenX + 20,\n\t\t\t\ty: e.screenY - 120,\n\t\t\t\tchild:  `${nameKey}: ${name}${valueStr}`,\n\t\t\t\tshow: true\n\t\t\t},\n\t\t\tsunburstHighlight:true\n\t\t})\n\t\tonMouseOver && onMouseOver()\n\t}\n\thandleMouseOut = () => {\n\t\tconst {onMouseOut} = this.props\n\t\tthis.setState({\n\t\t\tactiveIdx: '0',\n\t\t\tcontent:'',\n\t\t\ttooltip: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tchild: '',\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\tsunburstHighlight:false\n\t\t})\n\t\tonMouseOut && onMouseOut()\n\t}\n\tcomputeTextRotation = (d) => {\n\t\tlet angle = (d.x0 + d.x1) / Math.PI * 90\n\t\treturn (angle < 180) ? angle - 90 : angle + 90\n\t}\n\trender({ width, height, padding, data, interactive, type, backgroundColor, hoverColor }, { tooltip,content, activeIdx,sunburstHighlight }) {\n\t\tlet root = d3.hierarchy(data)\n\t\tswitch (type) {\n\t\t\tcase 'tree':\n\t\t\tcase 'cluster': {\n\t\t\t\tlet treeLayout = type === 'tree' ? d3.tree() : d3.cluster()\n\t\t\t\ttreeLayout.size([width - padding.left - padding.right, height - padding.top - padding.bottom - 60])\n\t\t\t\ttreeLayout(root)\n\t\t\t\tlet descendantsData = root.descendants(), linkData = root.links()\n\t\t\t\treturn (\n\t\t\t\t\t<div class={styles.container}>\n\t\t\t\t\t\t<Tooltip {...tooltip} />\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\ttransform={`translate(${padding.left},${padding.top})`}\n\t\t\t\t\t\t\tref={el => this.tree = el}\n\t\t\t\t\t\t\tviewBox=\"0 0 400 240\"\n\t\t\t\t\t\t\tclass={styles.graph}\n\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\theight={height}>\n\t\t\t\t\t\t\t<g >\n\t\t\t\t\t\t\t\t<g class={styles.links}>\n\t\t\t\t\t\t\t\t\t{linkData && linkData.map((d, index) =>\n\t\t\t\t\t\t\t\t\t\t<g key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<line x1={d.source.x} y1={d.source.y} x2={d.target.x} y2={d.target.y} stroke=\"#5f5f5f\" />\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t<g class={styles.nodes}>\n\t\t\t\t\t\t\t\t\t{descendantsData && descendantsData.map((d, index) =>\n\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={interactive ? this.handleMouseOut : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseMove={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tclass={styles.node}>\n\t\t\t\t\t\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\t\t\t\t\t\tclass={styles.solid}\n\t\t\t\t\t\t\t\t\t\t\t\tcx={d.x}\n\t\t\t\t\t\t\t\t\t\t\t\tcy={d.y}\n\t\t\t\t\t\t\t\t\t\t\t\tr={activeIdx === index ? \"18\" : \"14\"}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index + 1}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? hoverColor : backgroundColor} />\n\t\t\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"#fff\" : \"#000\"}\n\t\t\t\t\t\t\t\t\t\t\t\tclass={styles.label}\n\t\t\t\t\t\t\t\t\t\t\t\tdx={d.x - 9}\n\t\t\t\t\t\t\t\t\t\t\t\tdy={d.y + 5}>\n\t\t\t\t\t\t\t\t\t\t\t\t{d.data.name}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'treemap':\n\t\t\tcase 'partition': {\n\t\t\t\tconst { rectPadding, paddingOuter, paddingInner, paddingLeft, paddingRight, paddingTop, paddingBottom, tile, ratio } = this.props\n\t\t\t\tlet layout = type === 'treemap' ? d3.treemap() : d3.partition()\n\t\t\t\tlayout.size([width, height])\n\t\t\t\tif (type === 'treemap') {\n\t\t\t\t\tpaddingOuter ? layout.paddingOuter(paddingOuter) : ''\n\t\t\t\t\tpaddingInner ? layout.paddingInner(paddingInner) : ''\n\t\t\t\t\tpaddingLeft ? layout.paddingLeft(paddingLeft) : ''\n\t\t\t\t\tpaddingRight ? layout.paddingRight(paddingRight) : ''\n\t\t\t\t\tpaddingTop ? layout.paddingTop(paddingTop) : ''\n\t\t\t\t\tpaddingBottom ? layout.paddingBottom(paddingBottom) : ''\n\t\t\t\t\trectPadding ? layout.padding(rectPadding) : ''\n\t\t\t\t\t/* paddingTop, paddingRight, Left and Bottom available */\n\t\t\t\t\t// treemapDice,treemapSlice,treemapSquarify,treemapResquarify\n\t\t\t\t\tswitch (tile) {\n\t\t\t\t\t\tcase 'treemapBinary':\n\t\t\t\t\t\t\tlayout.tile(d3.treemapBinary)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase 'treemapDice':\n\t\t\t\t\t\t\tlayout.tile(d3.treemapDice)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase 'treemapSlice':\n\t\t\t\t\t\t\tlayout.tile(d3.treemapSlice)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase 'treemapResquarify':\n\t\t\t\t\t\t\tlayout.tile(d3.treemapResquarify)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tlayout.tile(d3.treemapSquarify.ratio(ratio))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (type === 'partition') {\n\t\t\t\t\tlayout.padding(this.props.partitionPadding)\n\t\t\t\t}\n\t\t\t\troot.sum(d => d.value)\n\t\t\t\tlayout(root)\n\t\t\t\tlet data = root.descendants()\n\t\t\t\treturn (\n\t\t\t\t\t<div class={styles.container}>\n\t\t\t\t\t\t<Tooltip {...tooltip} />\n\t\t\t\t\t\t<svg viewBox=\"0 0 405 310\" ref={el => this.treemap = el} width={width - padding.left - padding.right} height={height - padding.top - padding.bottom}>\n\t\t\t\t\t\t\t<g transform=\"translate(1,0)\">\n\t\t\t\t\t\t\t\t{data && data.map((d, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={interactive ? this.handleMouseOut : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseMove={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tkey={index + 1} class={styles.node} transform={`translate(${[d.x0, d.y0]})`}>\n\t\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\t\twidth={d.x1 - d.x0}\n\t\t\t\t\t\t\t\t\t\t\t\theight={d.y1 - d.y0}\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"#2f2f2f\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? hoverColor : backgroundColor} />\n\t\t\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\t\t\tdx=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\tdy=\"15\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"#fff\" : \"#000\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{d.data.name}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'pack': {\n\t\t\t\tlet packLayout = d3.pack()\n\t\t\t\tpackLayout.size([width - padding.left - padding.right, height - padding.bottom - padding.top - 20])\n\t\t\t\tpackLayout.padding(this.props.packPadding)\n\n\t\t\t\troot.sum(d => d.value)\n\t\t\t\tpackLayout(root)\n\t\t\t\tlet packData = root.descendants()\n\n\t\t\t\treturn (\n\t\t\t\t\t<div class={styles.container}>\n\t\t\t\t\t\t<Tooltip {...tooltip} />\n\t\t\t\t\t\t<svg ref={el => this.pack = el} width={width} height={height}>\n\t\t\t\t\t\t\t<g transform=\"translate(0,10)\">\n\t\t\t\t\t\t\t\t{packData && packData.map((d, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={interactive ? this.handleMouseOut : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseMove={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tkey={index + 1}\n\t\t\t\t\t\t\t\t\t\t\tclass={styles.node}\n\t\t\t\t\t\t\t\t\t\t\ttransform={`translate(${[d.x, d.y]})`}>\n\t\t\t\t\t\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\t\t\t\t\t\tr={d.r}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? hoverColor : backgroundColor}\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"#2f2f2f\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\t\t\tdy=\"4\"\n\t\t\t\t\t\t\t\t\t\t\t\tdx=\"-10\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"#fff\" : \"#000\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{d.children === undefined ? d.data.name : ''}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'sunburst': {\n\t\t\t\tlet { radius, angle,dataKey,padding } = this.props\n\n\t\t\t\tlet color = d3.scaleOrdinal(d3.schemeCategory20)\n\t\t\t\t// 如果没有指定，则默认是长度或者宽度的一半\n\t\t\t\tradius = radius?radius:Math.min(width, height) / 2\n\n\t\t\t\tlet sunburstLayout = d3.partition()\n\t\t\t\tsunburstLayout.size([2 * Math.PI*angle, radius * radius])\n\t\t\t\tlet arc = d3.arc()\n\t\t\t\t\t.startAngle(d => d.x0)\n\t\t\t\t\t.endAngle(d => d.x1)\n\t\t\t\t\t.innerRadius(d => Math.sqrt(d.y0))\n\t\t\t\t\t.outerRadius(d => Math.sqrt(d.y1))\n\n\t\t\t\troot.sum(d => d[dataKey])\n\n\t\t\t\tsunburstLayout(root)\n\t\t\t\tlet sunburstData = root.descendants()\n\t\t\t\tlet {top,right,bottom,left} = padding\n\t\t\t\tlet contentArr = content.indexOf(',') > -1?content.split(','):[]\n\t\t\t\treturn (\n\t\t\t\t\t<div class={styles.container} style={{padding:`${top}px ${right}px ${bottom}px ${left}px`}}>\n\t\t\t\t\t\t<Tooltip {...tooltip} />\n\t\t\t\t\t\t<ul class={styles.showText}>\n\t\t\t\t\t\t\t{contentArr.length >0?contentArr.map((d,index)=>\n\t\t\t\t\t\t\t\t<li key={index}>{d}</li>\n\t\t\t\t\t\t\t):<li>{content}</li>}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<svg ref={el => this.pack = el} width={width} height={height}>\n\t\t\t\t\t\t\t<g class={styles.node} transform={`translate(${width / 2}, ${height * .52} )`}>\n\t\t\t\t\t\t\t\t{sunburstData && sunburstData.map((d, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={interactive ? this.handleMouseOut : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseMove={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={interactive ? (e) => this.handleMouseOver(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tonClick={interactive ? (e) => this.handleClick(e, d, index) : null}\n\t\t\t\t\t\t\t\t\t\t\tkey={index + 1}>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{display:d.depth ===0?'none':'block',opacity:sunburstHighlight && activeIdx !== index ?0.3:1}}\n\t\t\t\t\t\t\t\t\t\t\t\td={arc(d)}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={color((d.children ? d : d.parent).data.name)}\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"#fff\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{false &&<text\n\t\t\t\t\t\t\t\t\t\t\t\ttransform={`translate(${arc.centroid(d)}) rotate(${this.computeTextRotation(d)})`}\n\t\t\t\t\t\t\t\t\t\t\t\tdy=\".5em\"\n\t\t\t\t\t\t\t\t\t\t\t\tdx=\"-8\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill={activeIdx === index ? \"#fff\" : \"#000\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{d.parent ? d.data.name : ''}\n\t\t\t\t\t\t\t\t\t\t\t</text>}\n\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default HierarchyLayout\n"]}