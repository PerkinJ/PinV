{"version":3,"sources":["../../../src/components/common/Circle.js"],"names":["Circle","getInitialState","circleRadius","props","r","circleColor","fill","componentDidMount","voronoiRef","observe","circleStatus","cursor","deref","seriesName","id","split","_animateCircle","voronoiSeriesCursor","structure","update","_restoreCircle","componentWillUnmount","destroy","setState","state","render","cx","cy","className","defaultProps"],"mappings":";;;;;;AAAA;;;;;;;;IAEMA,M;;;;;;;;;kBAILC,e,8BAAkB;AACjB;AACA,SAAO;AACNC,iBAAc,KAAKC,KAAL,CAAWC,CADnB;AAENC,gBAAa,KAAKF,KAAL,CAAWG;AAFlB,GAAP;AAIA,E;;kBACDC,iB,gCAAoB;AAAA;;AACnB,MAAIJ,QAAQ,KAAKA,KAAjB;AACA;AACA;AACAA,QAAMK,UAAN,CAAiBC,OAAjB,CAAyB,YAAM;AAC9B,OAAIC,eAAeP,MAAMK,UAAN,CAAiBG,MAAjB,GAA0BC,KAA1B,EAAnB;AACA,OAAIC,aAAaV,MAAMW,EAAN,CAASC,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAjB;AACA,OAAIL,iBAAiB,QAArB,EAA+B;AAC9B,WAAKM,cAAL,CAAoBb,MAAMW,EAA1B;AACA,QAAIG,sBAAsBd,MAAMe,SAAN,CAAgBP,MAAhB,CAAuB,eAAvB,CAA1B;AACA,QAAIM,mBAAJ,EAAyB;AACxBA,yBAAoBN,MAApB,CAA2BE,UAA3B,EAAuCM,MAAvC,CAA8C;AAAA,aAAM,QAAN;AAAA,MAA9C;AACA;AACD,IAND,MAMO,IAAIT,iBAAiB,UAArB,EAAiC;AACvC,WAAKU,cAAL,CAAoBjB,MAAMW,EAA1B;AACAX,UAAMe,SAAN,CAAgBP,MAAhB,CAAuB,eAAvB,EAAwCA,MAAxC,CAA+CE,UAA/C,EAA2DM,MAA3D,CAAkE;AAAA,YAAM,UAAN;AAAA,KAAlE;AACA;AACD,GAbD;AAcA,E;;kBACDE,oB,mCAAuB;AACtB,OAAKlB,KAAL,CAAWK,UAAX,CAAsBc,OAAtB;AACA,E;;kBACDN,c,6BAAiB;AAChB,OAAKO,QAAL,CAAc;AACbrB,iBAAc,KAAKsB,KAAL,CAAWtB,YAAX,IAA2B,IAAI,CAA/B;AADD,GAAd;AAGA,E;;kBACDkB,c,6BAAiB;AAChB,OAAKG,QAAL,CAAc;AACbrB,iBAAc,KAAKC,KAAL,CAAWC;AADZ,GAAd;AAGA,E;;kBACDqB,M,qBAAS;AACR,MAAItB,QAAQ,KAAKA,KAAjB;AACA,SACC;AACC,OAAIA,MAAMuB,EADX;AAEC,OAAIvB,MAAMwB,EAFX;AAGC,MAAG,KAAKH,KAAL,CAAWtB,YAHf;AAIC,SAAM,KAAKsB,KAAL,CAAWnB,WAJlB;AAKC,OAAIF,MAAMW,EALX;AAMC,cAAWX,MAAMyB;AANlB,IADD;AAUA,E;;;6BAtDMC,Y,GAAe;AACrBvB,OAAM;AADe,C;kBAwDRN,M","file":"Circle.js","sourcesContent":["import { h, Component } from 'preact'\n\nclass Circle extends Component {\n\tstatic defaultProps = {\n\t\tfill: '#1f77b4'\n\t}\n\tgetInitialState() {\n\t\t// state for animation usage\n\t\treturn {\n\t\t\tcircleRadius: this.props.r,\n\t\t\tcircleColor: this.props.fill\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tlet props = this.props\n\t\t// The circle reference is observed when both it is set to\n\t\t// active, and to inactive, so we have to check which one\n\t\tprops.voronoiRef.observe(() => {\n\t\t\tlet circleStatus = props.voronoiRef.cursor().deref()\n\t\t\tlet seriesName = props.id.split('-')[0]\n\t\t\tif (circleStatus === 'active') {\n\t\t\t\tthis._animateCircle(props.id)\n\t\t\t\tlet voronoiSeriesCursor = props.structure.cursor('voronoiSeries')\n\t\t\t\tif (voronoiSeriesCursor) {\n\t\t\t\t\tvoronoiSeriesCursor.cursor(seriesName).update(() => 'active')\n\t\t\t\t}\n\t\t\t} else if (circleStatus === 'inactive') {\n\t\t\t\tthis._restoreCircle(props.id)\n\t\t\t\tprops.structure.cursor('voronoiSeries').cursor(seriesName).update(() => 'inactive')\n\t\t\t}\n\t\t})\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.props.voronoiRef.destroy()\n\t}\n\t_animateCircle() {\n\t\tthis.setState({\n\t\t\tcircleRadius: this.state.circleRadius * (5 / 4)\n\t\t})\n\t}\n\t_restoreCircle() {\n\t\tthis.setState({\n\t\t\tcircleRadius: this.props.r\n\t\t})\n\t}\n\trender() {\n\t\tlet props = this.props\n\t\treturn (\n\t\t\t<circle\n\t\t\t\tcx={props.cx}\n\t\t\t\tcy={props.cy}\n\t\t\t\tr={this.state.circleRadius}\n\t\t\t\tfill={this.state.circleColor}\n\t\t\t\tid={props.id}\n\t\t\t\tclassName={props.className}\n\t\t\t/>\n\t\t)\n\t}\n}\nexport default Circle\n"]}