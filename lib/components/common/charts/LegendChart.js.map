{"version":3,"sources":["../../../../src/components/common/charts/LegendChart.js"],"names":["d3","LegendChart","_renderLegend","props","legend","colors","colorAccessor","data","legendPosition","margins","sideOffset","_renderTitle","title","titleClassName","_renderChart","svgClassName","viewBox","children","render","className","width","height","display","defaultProps","scaleOrdinal","schemeCategory20","d","idx"],"mappings":";;;;;;AAAA;;AACA;;IAAYA,E;;AACZ;;;;;;;;;;;;;;IACMC,W;;;;;;;;;;;;0IAYLC,a,GAAe,YAAK;AACnB,OAAIC,QAAQ,MAAKA,KAAjB;;AAEA,OAAIA,MAAMC,MAAV,EAAkB;AACjB,WACC;AACC,aAAQD,MAAME,MADf;AAEC,oBAAeF,MAAMG,aAFtB;AAGC,WAAMH,MAAMI,IAHb;AAIC,qBAAgBJ,MAAMK,cAJvB;AAKC,cAASL,MAAMM,OALhB;AAMC,YAAON,MAAMO;AANd,MADD;AAUA;AACD,G,QACDC,Y,GAAe,YAAM;AACpB,OAAIR,QAAQ,MAAKA,KAAjB;;AAEA,OAAIA,MAAMS,KAAN,KAAgB,EAAhB,IAAsBT,MAAMS,KAAN,KAAgB,IAA1C,EAAgD;AAC/C,WACC;AAAA;AAAA;AACC,iBAAWT,MAAMU;AADlB;AAGEV,WAAMS;AAHR,KADD;AAOA;AACD,UAAO,IAAP;AACA,G,QACDE,Y,GAAe,YAAM;AACpB,OAAIX,QAAQ,MAAKA,KAAjB;;AAEA,UACC;AAAA;AAAA;AACC,gBAAWA,MAAMY,YADlB;AAEC,aAAO,MAFR;AAGC,cAASZ,MAAMa,OAHhB;AAIC,YAAM;AAJP;AAMEb,UAAMc;AANR,IADD;AAUA,G;;;uBACDC,M,qBAAS;AACR,MAAIf,QAAQ,KAAKA,KAAjB;;AAEA,SACC;AAAA;AAAA;AACC,eAAWA,MAAMgB,SADlB;AAEC,WAAO,EAAE,SAAShB,MAAMiB,KAAjB,EAAwB,UAAUjB,MAAMkB,MAAxC;AAFR;AAIE,QAAKV,YAAL,EAJF;AAKC;AAAA;AAAA,MAAK,OAAO,EAAEW,SAAS,OAAX,EAAoBF,OAAO,MAA3B,EAAmCC,QAAQ,MAA3C,EAAZ;AACC;AAAA;AAAA,OAAK,OAAO,EAAEC,SAAS,YAAX,EAAZ;AACE,UAAKR,YAAL;AADF,KADD;AAIC;AAAA;AAAA,OAAK,OAAO,EAAEQ,SAAS,YAAX,EAAyBF,OAAOjB,MAAMO,UAAtC,EAAkD,iBAAiB,KAAnE,EAAZ;AACE,UAAKR,aAAL;AADF;AAJD;AALD,GADD;AAgBA,E;;;6BA1EMqB,Y,GAAe;AACrBJ,YAAW,kBADU;AAErBd,SAAQL,GAAGwB,YAAH,CAAgBxB,GAAGyB,gBAAnB,CAFa;AAGrBnB,gBAAe,uBAACoB,CAAD,EAAIC,GAAJ;AAAA,SAAYA,GAAZ;AAAA,EAHM;AAIrBpB,OAAM,EAJe;AAKrBH,SAAQ,KALa;AAMrBI,iBAAgB,OANK;AAOrBE,aAAY,GAPS,EAOA;AACrBK,eAAc,WARO;AASrBF,iBAAgB;AATK,C;kBA4ERZ,W","file":"LegendChart.js","sourcesContent":["import { h, Component } from 'preact'\nimport * as d3 from 'd3'\nimport Legend from '../Legend'\nclass LegendChart extends Component {\n\tstatic defaultProps = {\n\t\tclassName: 'rd3-legend-chart',\n\t\tcolors: d3.scaleOrdinal(d3.schemeCategory20),\n\t\tcolorAccessor: (d, idx) => idx,\n\t\tdata: [],\n\t\tlegend: false,\n\t\tlegendPosition: 'right',\n\t\tsideOffset: 100,     // legend的长度\n\t\tsvgClassName: 'rd3-chart',\n\t\ttitleClassName: 'rd3-chart-title'\n\t}\n\t_renderLegend =()=> {\n\t\tlet props = this.props\n\n\t\tif (props.legend) {\n\t\t\treturn (\n\t\t\t\t<Legend\n\t\t\t\t\tcolors={props.colors}\n\t\t\t\t\tcolorAccessor={props.colorAccessor}\n\t\t\t\t\tdata={props.data}\n\t\t\t\t\tlegendPosition={props.legendPosition}\n\t\t\t\t\tmargins={props.margins}\n\t\t\t\t\twidth={props.sideOffset}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\t}\n\t_renderTitle = () => {\n\t\tlet props = this.props\n\n\t\tif (props.title !== '' && props.title !== null) {\n\t\t\treturn (\n\t\t\t\t<h4\n\t\t\t\t\tclassName={props.titleClassName}\n\t\t\t\t>\n\t\t\t\t\t{props.title}\n\t\t\t\t</h4>\n\t\t\t)\n\t\t}\n\t\treturn null\n\t}\n\t_renderChart = () => {\n\t\tlet props = this.props\n\n\t\treturn (\n\t\t\t<svg\n\t\t\t\tclassName={props.svgClassName}\n\t\t\t\theight=\"100%\"\n\t\t\t\tviewBox={props.viewBox}\n\t\t\t\twidth=\"100%\"\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t</svg>\n\t\t)\n\t}\n\trender() {\n\t\tlet props = this.props\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={props.className}\n\t\t\t\tstyle={{ 'width': props.width, 'height': props.height }}\n\t\t\t>\n\t\t\t\t{this._renderTitle()}\n\t\t\t\t<div style={{ display: 'table', width: '100%', height: '100%' }}>\n\t\t\t\t\t<div style={{ display: 'table-cell' }}>\n\t\t\t\t\t\t{this._renderChart()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ display: 'table-cell', width: props.sideOffset, 'verticalAlign': 'top' }}>\n\t\t\t\t\t\t{this._renderLegend()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\nexport default LegendChart\n"]}