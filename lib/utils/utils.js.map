{"version":3,"sources":["../../src/utils/utils.js"],"names":["handleD3Color","colorGenerator","addEvent","removeEvent","d3","str","indexOf","hsl","rgb","numberOfSteps","colors","range","map","index","obj","type","fn","attachEvent","window","event","addEventListener","detachEvent","removeEventListener","colour","scale","scaleOrdinal","schemeCategory20","num","parseInt","slice","bumps","n","m","a","i","bump","x","Math","random","y","z","w","exp"],"mappings":";;;;QAEgBA,a,GAAAA,a;QAWAC,c,GAAAA,c;QAMAC,Q,GAAAA,Q;QASAC,W,GAAAA,W;;AA5BhB;;IAAYC,E;;;;AACZ;AACO,SAASJ,aAAT,CAAuBK,GAAvB,EAA4B;AAClC,KAAIA,OAAO,OAAOA,GAAP,KAAe,QAA1B,EAAoC;AACnC,MAAIA,IAAIC,OAAJ,CAAY,KAAZ,IAAqB,CAAC,CAA1B,EAA6B;AAC5B,UAAOF,GAAGG,GAAH,CAAOF,GAAP,CAAP;AACA,GAFD,MAEO;AACN,UAAOD,GAAGI,GAAH,CAAOH,GAAP,CAAP;AACA;AACD;AACD;;AAED;AACO,SAASJ,cAAT,CAAwBQ,aAAxB,EAAuC;AAC7C,KAAMC,SAASN,GAAGO,KAAH,CAASF,aAAT,EAAwBG,GAAxB,CAA4B,UAACC,KAAD;AAAA,SAAWT,GAAGG,GAAH,CAAQ,MAAME,aAAP,GAAwBI,KAA/B,EAAsC,GAAtC,EAA2C,IAA3C,CAAX;AAAA,EAA5B,CAAf;AACA,QAAO,UAACA,KAAD;AAAA,SAAWH,OAAOG,KAAP,CAAX;AAAA,EAAP;AACA;;AAED;AACO,SAASX,QAAT,CAAkBY,GAAlB,EAAuBC,IAAvB,EAA6BC,EAA7B,EAAiC;AACvC,KAAIF,IAAIG,WAAR,EAAqB;AACpBH,MAAI,MAAMC,IAAN,GAAaC,EAAjB,IAAuBA,EAAvB;AACAF,MAAIC,OAAOC,EAAX,IAAiB,YAAY;AAAEF,OAAI,MAAMC,IAAN,GAAaC,EAAjB,EAAqBE,OAAOC,KAA5B;AAAoC,GAAnE;AACAL,MAAIG,WAAJ,CAAgB,OAAOF,IAAvB,EAA6BD,IAAIC,OAAOC,EAAX,CAA7B;AACA,EAJD,MAKCF,IAAIM,gBAAJ,CAAqBL,IAArB,EAA2BC,EAA3B,EAA+B,KAA/B;AACD;;AAEM,SAASb,WAAT,CAAqBW,GAArB,EAA0BC,IAA1B,EAAgCC,EAAhC,EAAoC;AAC1C,KAAIF,IAAIO,WAAR,EAAqB;AACpBP,MAAIO,WAAJ,CAAgB,OAAON,IAAvB,EAA6BD,IAAIC,OAAOC,EAAX,CAA7B;AACAF,MAAIC,OAAOC,EAAX,IAAiB,IAAjB;AACA,EAHD,MAICF,IAAIQ,mBAAJ,CAAwBP,IAAxB,EAA8BC,EAA9B,EAAkC,KAAlC;AACD;;AAID;;;;AAIO,IAAMO,0BAAU,YAAM;AAC5B,KAAMC,QAAQpB,GAAGqB,YAAH,CAAgBrB,GAAGsB,gBAAnB,CAAd;AACA,QAAO,UAACC,GAAD;AAAA,SAASC,SAASJ,MAAMG,GAAN,EAAWE,KAAX,CAAiB,CAAjB,CAAT,EAA8B,EAA9B,CAAT;AAAA,EAAP;AACA,CAHqB,EAAf;;AAMP;AACO,IAAOC,wBAAO,SAAPA,KAAO,CAACC,CAAD,EAAIC,CAAJ,EAAU;AAC9B,KAAIC,IAAI,EAAR;AAAA,KAAYC,UAAZ;AACA,MAAKA,IAAI,CAAT,EAAYA,IAAIH,CAAhB,EAAmB,EAAEG,CAArB;AAAwBD,IAAEC,CAAF,IAAO,CAAP;AAAxB,EACA,KAAKA,IAAI,CAAT,EAAYA,IAAIF,CAAhB,EAAmB,EAAEE,CAArB;AAAwBC,OAAKF,CAAL,EAAQF,CAAR;AAAxB,EACA,OAAOE,CAAP;AACA,CALM;;AAOP,SAASE,IAAT,CAAcF,CAAd,EAAiBF,CAAjB,EAAoB;AACnB,KAAIK,IAAI,KAAK,MAAMC,KAAKC,MAAL,EAAX,CAAR;AAAA,KACCC,IAAI,IAAIF,KAAKC,MAAL,EAAJ,GAAoB,GADzB;AAAA,KAECE,IAAI,MAAM,MAAMH,KAAKC,MAAL,EAAZ,CAFL;AAGA,MAAK,IAAIJ,IAAI,CAAb,EAAgBA,IAAIH,CAApB,EAAuBG,GAAvB,EAA4B;AAC1B,MAAIO,IAAI,CAACP,IAAIH,CAAJ,GAAQQ,CAAT,IAAcC,CAAtB;AACAP,IAAEC,CAAF,KAAQE,IAAIC,KAAKK,GAAL,CAAS,CAACD,CAAD,GAAKA,CAAd,CAAZ;AACD;AACD","file":"utils.js","sourcesContent":["import * as d3 from 'd3'\n// 检测color的格式是否是hsl形式\nexport function handleD3Color(str) {\n\tif (str && typeof str === 'string') {\n\t\tif (str.indexOf('hsl') > -1) {\n\t\t\treturn d3.hsl(str)\n\t\t} else {\n\t\t\treturn d3.rgb(str)\n\t\t}\n\t}\n}\n\n// 颜色生成器\nexport function colorGenerator(numberOfSteps) {\n\tconst colors = d3.range(numberOfSteps).map((index) => d3.hsl((360 / numberOfSteps) * index, 0.8, 0.64))\n\treturn (index) => colors[index]\n}\n\n// 监听器\nexport function addEvent(obj, type, fn) {\n\tif (obj.attachEvent) {\n\t\tobj['e' + type + fn] = fn\n\t\tobj[type + fn] = function () { obj['e' + type + fn](window.event) }\n\t\tobj.attachEvent('on' + type, obj[type + fn])\n\t} else\n\t\tobj.addEventListener(type, fn, false)\n}\n\nexport function removeEvent(obj, type, fn) {\n\tif (obj.detachEvent) {\n\t\tobj.detachEvent('on' + type, obj[type + fn])\n\t\tobj[type + fn] = null\n\t} else\n\t\tobj.removeEventListener(type, fn, false)\n}\n\n\n\n/**\n * Color scale generator\n * @returns {function} color generator\n */\nexport const colour = (() => {\n\tconst scale = d3.scaleOrdinal(d3.schemeCategory20)\n\treturn (num) => parseInt(scale(num).slice(1), 16)\n})()\n\n\n// Inspired by Lee Byron’s test data generator.\nexport const  bumps =(n, m) => {\n\tlet a = [], i\n\tfor (i = 0; i < n; ++i) a[i] = 0\n\tfor (i = 0; i < m; ++i) bump(a, n)\n\treturn a\n}\n\nfunction bump(a, n) {\n\tlet x = 1 / (0.1 + Math.random()),\n\t\ty = 2 * Math.random() - 0.5,\n\t\tz = 10 / (0.1 + Math.random())\n\tfor (let i = 0; i < n; i++) {\n\t  let w = (i / n - y) * z\n\t  a[i] += x * Math.exp(-w * w)\n\t}\n}\n"]}